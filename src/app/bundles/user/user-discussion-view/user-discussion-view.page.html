<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
            <ion-back-button></ion-back-button>
        </ion-buttons>
        <ion-title>Message</ion-title>
    </ion-toolbar>
</ion-header>
<ion-content padding>

    <ion-infinite-scroll position="top" threshold="100px" (ionInfinite)="getDiscussionComments()">
        <ion-infinite-scroll-content></ion-infinite-scroll-content>
    </ion-infinite-scroll>

    <div *ngFor="let discussion_comment of discussion_comments">

        <img appMecImageCache
             [type]="discussion_comment.sender.sex === 'f' ? 'man' : 'woman'"
             [url]="environment.resizer_url + 'user/' + discussion_comment.sender.id + '/square/' + discussion_comment.sender.picture"/>

        {{discussion_comment.created | date: 'dd/MM/yyyy Ã  HH:mm'}}
        {{discussion_comment.content}}
        <a (click)="loadDiscussionCommentActionSheet(discussion_comment)">options</a>
    </div>


    <form *ngIf="create_form" [formGroup]="create_form" #ngForm="ngForm" (ngSubmit)="submit()">
        <ion-item>
            <ion-label>Contenu</ion-label>
            <ion-textarea formControlName="content" placeholder=""></ion-textarea>
            <small *ngIf="ngForm.submitted" class="form-error">{{create_form.getError('error',
                'content')}}
            </small>
        </ion-item>
        <ion-button type="submit" size="large" expand="block">envoyer</ion-button>
    </form>

</ion-content>
